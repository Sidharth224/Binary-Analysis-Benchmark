#!/bin/bash

set -x
set -e

export NEW_CVE1=CVE-2020-10067
export NEW_CVE2=2020-10067
export ZEPHYR_VER=2.2.0

export BASE_COMMIT_AS=8ed4b62dc0d65bcfbd8c2b61238c1babe7eed237
export FIX_COMMIT_AS="4b2fc256cfe46f831da3bb8176a849645713dcee 8ed4b62dc0d65bcfbd8c2b61238c1babe7eed237"
export PATCHES_LIST=

export DATBASE_HOME=/home/sidharth/dataset-creation/zephyr-binaries
export SHELL_HOME=/home/sidharth/dataset-creation/Shell-scripts 
export GITREPO_HOME=/home/sidharth/Binary-dataset-CVE-beta/binaries/zephyr-os

mkdir $DATBASE_HOME/$NEW_CVE1/ARC-Boards
mkdir $DATBASE_HOME/$NEW_CVE1/ARM-Boards
mkdir $DATBASE_HOME/$NEW_CVE1/RISCV-Boards
mkdir $DATBASE_HOME/$NEW_CVE1/X86-Boards

cp $SHELL_HOME/ARC.sh $DATBASE_HOME/$NEW_CVE1/ARC-Boards/ARC-$NEW_CVE2.sh
cp $SHELL_HOME/ARM.sh $DATBASE_HOME/$NEW_CVE1/ARM-Boards/ARM-$NEW_CVE2.sh
cp $SHELL_HOME/RISCV.sh $DATBASE_HOME/$NEW_CVE1/RISCV-Boards/RISCV-$NEW_CVE2.sh
cp $SHELL_HOME/X86.sh $DATBASE_HOME/$NEW_CVE1/X86-Boards/X86-$NEW_CVE2.sh
cp $SHELL_HOME/CVE-build.sh $DATBASE_HOME/$NEW_CVE1/$NEW_CVE1-build.sh

"$DATBASE_HOME/$NEW_CVE1/ARC-Boards/ARC-$NEW_CVE2.sh" 
"$DATBASE_HOME/$NEW_CVE1/ARM-Boards/ARM-$NEW_CVE2.sh"
"$DATBASE_HOME/$NEW_CVE1/RISCV-Boards/RISCV-$NEW_CVE2.sh"
"$DATBASE_HOME/$NEW_CVE1/X86-Boards/X86-$NEW_CVE2.sh"

cp -r $DATBASE_HOME/$NEW_CVE1 $GITREPO_HOME/$NEW_CVE1
