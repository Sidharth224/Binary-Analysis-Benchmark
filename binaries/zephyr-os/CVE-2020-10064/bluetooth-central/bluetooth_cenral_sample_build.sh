#!/bin/bash

set -x
set -e

#CVE for which binaries are generated
export CVENUM=2020-10064

# Zephyr configuration env variables
export ZEPHYR_SDK_INSTALL_DIR=/home/sidharth/zephyr-sdk-0.11.4
export ZEPHYR_BASE_DIR=/home/sidharth/zephyr-2.4.0/zephyr
export ZEPHYR_TOOLCHAIN_VARIANT=zephyr

# git branch with the CVE and fix for the CVE
export BASE_COMMIT=38970c07abfcddcfc6a5958189f096a55c49594a
export FIX_COMMITS=38970c07abfcddcfc6a5958189f096a55c49594a

# Directories configuration
export CVE_BUILD_DIR=/home/sidharth/dataset-creation/zephyr-binaries/CVE-2020-10064
export SAMPLE=bluetooth-central
export SAMPLE_DIR=/home/sidharth/zephyr-2.4.0/zephyr/samples/bluetooth/central
export OUT_DIR=/home/sidharth/dataset-creation/zephyr-binaries/CVE-2020-10064/bluetooth-central/X86-boards
               
# Boards selected for binary generation
export BOARDS="acrn minnowboard qemu_x86 up_squared"

#run the general CVE generation shell script
"$CVE_BUILD_DIR/CVE-2020-10064-build.sh" 